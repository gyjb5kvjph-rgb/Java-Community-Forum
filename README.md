# Spring Boot 掲示板アプリケーション

## 概要

これは、Spring Boot, Spring Security, JPA (Hibernate) を使用して構築した、フル機能のWeb掲示板アプリケーションです。
認証、投稿、いいね（非同期）、コメント（編集・削除機能付き）など、モダンなWebアプリケーションのコア機能を実装しています。

## 主な機能

* **ユーザー認証**: Spring Securityによるログイン、新規登録機能。パスワードはBcryptでハッシュ化。
* **投稿管理 (CRUD)**: ログインユーザーによる投稿の作成、編集、削除（本人認可チェック付き）。
* **コメント機能 (CRUD)**: 各投稿へのコメント作成、編集、削除（本人認可チェック付き）。
* **いいね機能**: JavaScript (fetch API) を用いた非同期の「いいね」トグル機能。CSRFトークンにも対応。
* **ページネーション**: 投稿一覧のページング機能。
* **データ永続化**: 改行コードの正規化（サーバー/クライアント両方）と、CSSによる改行表示を実装。

## こだわった点（技術的ハイライト）

### 1. パフォーマンス最適化 (N+1問題の解決)

一覧表示（`/`）において、投稿ごとにコメントやいいねを取得するとN+1問題が発生するため、`PostRepository`に`@Query`アノテーションを使用し、`JOIN FETCH`と`DISTINCT`句を用いたカスタムクエリを実装しました。これにより、DBへの問い合わせを2回に抑え、表示速度を最適化しています。

### 2. セキュリティと認可

Spring Securityを導入し、`/new`や`/comments/create`など特定のエンドポイントを保護。さらに、コントローラー層でログイン中のユーザー名とリソースの所有者名を比較し、**投稿者本人以外が編集・削除リクエストを送れない**ように認可処理を実装しました。

## 使用技術

* **バックエンド**: Java 17, Spring Boot
* **セキュリティ**: Spring Security (認証, CSRF保護)
* **データベース**: Spring Data JPA (Hibernate), PostgreSQL
* **フロントエンド**: Thymeleaf, Bootstrap (CDN), JavaScript (fetch API)
* **デプロイ**: Render